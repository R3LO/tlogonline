<!DOCTYPE html>
<html lang="ru">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç TLog</title>
    <link rel="icon" href="{% static 'favicon.svg' %}" type="image/svg+xml">
    <link rel="alternate icon" href="{% static 'favicon.svg' %}" type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/common.css' %}" rel="stylesheet">
    <link href="{% static 'css/dashboard.css' %}" rel="stylesheet">
    <link href="{% static 'css/logbook.css' %}" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">üì° TLog</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link active" href="/dashboard/">
                        <span>üìä</span> –ü–∞–Ω–µ–ª—å
                    </a>
                    <a class="nav-link" href="/logbook/">
                        <span>üìì</span> Logbook
                    </a>
                    <a class="nav-link" href="/qth-loc.html" target="_blank">
                        <span>üó∫Ô∏è</span> Grid map
                    </a>
                    <a class="nav-link" href="/achievements/">
                        <span>üèÜ</span> –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                    </a>
                    <a class="nav-link" href="/dashboard/profile/">
                        <span>üë§</span> {{ user.username }}
                    </a>
                    <a class="nav-link" href="/logout/">
                        <span>üö™</span> –í—ã–π—Ç–∏
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="main-container">
            <!-- Header -->
            <div class="logbook-header text-center">
                <h2><span>üìä</span> –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                <p class="mb-0">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ QSO –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π</p>
            </div>

            <div class="p-4">

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
            {% include 'includes/stats_cards.html' %}

        <div class="row">
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="col-lg-8">
                1111
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
                222


            </div>

            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="col-lg-4">
                <!-- –£—Ç–∏–ª–∏—Ç—ã -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h6 class="mb-0">üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-column gap-2">
                            <a href="/dashboard/qo100/converter/" class="btn btn-outline-primary btn-sm">
                                <span>üõ∞Ô∏è</span> –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –ª–æ–≥–∞ QO-100
                            </a>
                            <a href="/dashboard/cosmos/" class="btn btn-outline-primary btn-sm">
                                <span>üöÄ</span> –ó–∞—è–≤–∫–∞ –Ω–∞ –¥–∏–ø–ª–æ–º –ö–æ—Å–º–æ—Å
                            </a>
                            <a href="/user-awards/" class="btn btn-outline-success btn-sm">
                                <span>üèÜ</span> –ù–∞–≥—Ä–∞–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                            </a>
                        </div>
                    </div>
                </div>

                <!-- QO-100 —Ä–µ–π—Ç–∏–Ω–≥–∏ -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h6 class="mb-0">üì° QO-100 —Ä–µ–π—Ç–∏–Ω–≥–∏</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-column gap-2">
                            <a href="/dashboard/qo100/regions/" class="btn btn-outline-primary btn-sm">
                                <span>üó∫Ô∏è</span> –†–µ–≥–∏–æ–Ω—ã –†–§
                            </a>
                            <a href="/dashboard/qo100/r150s/" class="btn btn-outline-primary btn-sm">
                                <span>üåç</span> –°—Ç—Ä–∞–Ω—ã –†-150-–°
                            </a>
                            <a href="/dashboard/qo100/dxcc/" class="btn btn-outline-primary btn-sm">
                                <span>üåê</span> –°—Ç—Ä–∞–Ω—ã DXCC
                            </a>
                            <a href="/dashboard/qo100/grids/" class="btn btn-outline-primary btn-sm">
                                <span>üìç</span> –õ–æ–∫–∞—Ç–æ—Ä—ã
                            </a>
                            <a href="/dashboard/qo100/unique-callsigns/" class="btn btn-outline-primary btn-sm">
                                <span>üì°</span> –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–∑—ã–≤–Ω—ã–µ
                            </a>
                        </div>
                    </div>
                </div>

                <!-- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è LoTW -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è LoTW</h6>
                    </div>
                    <div class="card-body">
                        {% if not profile.lotw_user or not profile.lotw_password %}
                            <p class="mb-0 text-warning">
                                <span class="me-2">‚ö†Ô∏è</span>
                                –î–∞–Ω–Ω—ã–µ LoTW –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
                            </p>
                        {% elif profile.lotw_chk_pass %}
                            <p class="mb-0 text-success">
                                <span class="me-2" style="color: green;">‚úÖ</span>
                                –î–æ—Å—Ç—É–ø –∫ LoTW
                            </p>
                        {% endif %}

                        {% if profile.lotw_lastsync %}
                            <p class="mb-0 mt-2">
                                <span class="me-2">üìÖ</span>
                                –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
                                <small><strong>{{ profile.lotw_lastsync|date:"d.m.Y H:i" }}</strong></small>
                            </p>
                        {% else %}
                            <p class="mb-0 text-muted mt-2">
                                <span class="me-2">‚ùå</span>
                                –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å LoTW –Ω–µ –ø—Ä–æ–≤–æ–¥–∏–ª–∞—Å—å
                            </p>
                        {% endif %}

                        <p class="mb-0 mt-2">
                            <span class="me-2">üí°</span>
                            <small>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å LoTW –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏.</small>
                        </p>

                        <div class="mt-3">
                            <a href="/dashboard/profile/" class="btn btn-outline-primary btn-sm">
                                <span>‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ LoTW
                            </a>
                        </div>
                    </div>
                </div>

                <!-- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ ADIF —Ñ–∞–π–ª—ã -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h6 class="mb-0">üìÅ –ú–æ–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏</h6>
                    </div>
                    <div class="card-body p-2">
                        {% if adif_uploads %}
                            <div class="list-group list-group-flush">
                                {% for upload in adif_uploads %}
                                    <div class="list-group-item px-2 py-2">
                                        <div class="d-flex justify-content-between align-items-start mb-1">
                                            <small class="text-truncate fw-bold" style="max-width: 120px;">{{ upload.file_name }}</small>
                                            <div class="d-flex align-items-center gap-1">
                                                <span class="badge {% if upload.processed %}bg-success{% else %}bg-warning{% endif %} py-1">
                                                    {{ upload.qso_count|default:0 }} QSO
                                                </span>
                                                <button type="button"
                                                        class="btn btn-outline-danger btn-sm p-1"
                                                        title="–£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ QSO"
                                                        data-bs-toggle="modal"
                                                        data-bs-backdrop="false"
                                                        onclick="deleteAdifUpload('{{ upload.id }}', '{{ upload.file_name }}')"
                                                        {% if upload.qso_count|default:0 == 0 %}disabled{% endif %}>
                                                    <span style="font-size: 0.75rem;">üóëÔ∏è</span>
                                                </button>
                                            </div>
                                        </div>
                                        <small class="text-muted d-block">{{ upload.upload_date|date:"d.m.Y H:i" }}</small>
                                        {% if upload.error_message %}
                                            <small class="text-danger">{{ upload.error_message|truncatechars:30 }}</small>
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <p class="text-muted small mb-0">–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% include 'cookie_banner.html' %}



<script src="{% static 'js/dashboard.js' %}"></script>
</body>
</html>