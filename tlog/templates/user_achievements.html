<!DOCTYPE html>
<html lang="ru">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞–≥—Ä–∞–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - TLog</title>
    <link rel="icon" href="{% static 'favicon.svg' %}" type="image/svg+xml">
    <link rel="alternate icon" href="{% static 'favicon.svg' %}" type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px 15px 0 0;
            padding: 2rem;
        }
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .achievement-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: #f8f9fa;
            border-radius: 20px;
            padding: 4px 10px;
            margin: 2px;
            font-size: 0.85rem;
        }
        .achievement-badge .icon {
            font-size: 1rem;
        }
        .user-card {
            transition: all 0.3s ease;
            border: none;
            border-radius: 12px;
            overflow: hidden;
        }
        .user-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .user-card.highlight {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #667eea;
        }
        .rank-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .callsign-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        .callsign-link:hover {
            text-decoration: underline;
        }
        .table-awards {
            font-size: 0.9rem;
        }
        .table-awards th {
            background: #f8f9fa;
            font-weight: 600;
            border-bottom: 2px solid #667eea;
        }
        .table-awards td {
            vertical-align: middle;
        }
        .progress-mini {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-mini .progress-bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">üì° TLog - —Ç–≤–æ–π –ª–æ–≥</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link text-light me-3" href="/dashboard/">
                    <span>üìä</span> –ü–∞–Ω–µ–ª—å
                </a>
                <a class="nav-link text-light me-3" href="/logbook/">
                    <span>üìì</span> Logbook
                </a>
                <a class="nav-link text-light me-3" href="/qth-loc.html" target="_blank">
                    <span>üó∫Ô∏è</span> Grid map
                </a>
                <a class="nav-link text-light me-3" href="/achievements/">
                    <span>üèÜ</span> –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                </a>
                {% if user.is_authenticated %}
                    <a class="nav-link text-light me-3" href="/dashboard/profile/">
                        <span>üë§</span> {{ user.username }}
                    </a>
                    <a class="nav-link text-light" href="/logout/">
                        <span>üö™</span> –í—ã–π—Ç–∏
                    </a>
                {% else %}
                    <a class="nav-link text-light" href="/login/">
                        <span>üîë</span> –í–æ–π—Ç–∏
                    </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="main-container">
            <!-- Header -->
            <div class="header text-center">
                <h2><span>üèÜ</span> –ù–∞–≥—Ä–∞–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                <p class="mb-0">–†–µ–π—Ç–∏–Ω–≥ —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
            </div>

            <div class="p-4">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã -->
                <div class="d-flex flex-wrap gap-3 mb-4">
                    <div class="stats-card flex-fill" style="min-width: 140px;">
                        <div class="stats-number">{{ total_users }}</div>
                        <div>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="stats-card flex-fill" style="min-width: 140px;">
                        <div class="stats-number">{{ total_qso_all }}</div>
                        <div>–í—Å–µ–≥–æ QSO</div>
                    </div>
                    <div class="stats-card flex-fill" style="min-width: 140px;">
                        <div class="stats-number">{{ total_qso_lotw }}</div>
                        <div>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ LoTW</div>
                    </div>
                </div>

                <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                {% if user_achievements_list %}
                <div class="table-responsive">
                    <table class="table table-hover table-awards">
                        <thead>
                            <tr>
                                <th style="width: 50px;">#</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th style="text-align: center;">QSO</th>
                                <th style="text-align: center;">–î–∏–∞–ø.</th>
                                <th style="text-align: center;">–ú–æ–¥—É–ª.</th>
                                <th style="text-align: center;">–°—Ç—Ä–∞–Ω</th>
                                <th style="text-align: center;">–†–µ–≥–∏–æ–Ω –†–§</th>
                                <th style="text-align: center;">LoTW</th>
                                <th style="text-align: center;">QO-100</th>
                                <th style="min-width: 300px;">–ù–∞–≥—Ä–∞–¥—ã</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user_data in user_achievements_list %}
                            <tr>
                                <td>
                                    <span class="rank-badge">{{ forloop.counter }}</span>
                                </td>
                                <td>
                                    <a href="/{{ user_data.callsign|default:user_data.username }}/" class="callsign-link">
                                        <strong>{{ user_data.username }}</strong>
                                    </a>
                                    {% if user_data.callsign %}
                                        <br><small class="text-muted">{{ user_data.callsign }}</small>
                                    {% endif %}
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge bg-primary">{{ user_data.total_qso }}</span>
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge {% if user_data.bands >= 10 %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ user_data.bands }}
                                    </span>
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge {% if user_data.modes >= 5 %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ user_data.modes }}
                                    </span>
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge {% if user_data.r150s_count >= 50 %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ user_data.r150s_count }}
                                    </span>
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge bg-info">{{ user_data.ru_regions }}</span>
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge {% if user_data.lotw_count >= 10 %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ user_data.lotw_count }}
                                    </span>
                                </td>
                                <td style="text-align: center;">
                                    <span class="badge {% if user_data.qo100_all >= 100 %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ user_data.qo100_all }}
                                    </span>
                                </td>
                                <td>
                                    {% for achievement in user_data.achievements %}
                                        <span class="achievement-badge" title="{{ achievement.title }}">
                                            <span class="icon">{{ achievement.icon }}</span>
                                            <span>{{ achievement.title }}</span>
                                        </span>
                                    {% empty %}
                                        <small class="text-muted">–ù–µ—Ç –Ω–∞–≥—Ä–∞–¥</small>
                                    {% endfor %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="text-center py-5">
                    <p class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö</p>
                </div>
                {% endif %}

                <!-- –õ–µ–≥–µ–Ω–¥–∞ –Ω–∞–≥—Ä–∞–¥ -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h6 class="mb-0"><span>üìñ</span> –õ–µ–≥–µ–Ω–¥–∞ –Ω–∞–≥—Ä–∞–¥</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-muted mb-2">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</h6>
                                <div class="d-flex flex-wrap gap-2">
                                    <span class="achievement-badge"><span class="icon">üéØ</span> –ù–æ–≤–∏—á–æ–∫ (100+ QSO)</span>
                                    <span class="achievement-badge"><span class="icon">‚≠ê</span> –û–ø—ã—Ç–Ω—ã–π (500+ QSO)</span>
                                    <span class="achievement-badge"><span class="icon">üèÜ</span> –ú–∞—Å—Ç–µ—Ä (1000+ QSO)</span>
                                    <span class="achievement-badge"><span class="icon">üì°</span> –†–∞–∑–≤–µ–¥—á–∏–∫ (10+ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤)</span>
                                    <span class="achievement-badge"><span class="icon">üéõÔ∏è</span> –£–Ω–∏–≤–µ—Ä—Å–∞–ª (5+ –º–æ–¥—É–ª—è—Ü–∏–π)</span>
                                    <span class="achievement-badge"><span class="icon">üåç</span> –û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ DX (50+ —Å—Ç—Ä–∞–Ω –†-150-–°)</span>
                                    <span class="achievement-badge"><span class="icon">üéñÔ∏è</span> –ü–∞—Ç—Ä–∏–æ—Ç (100+ —Å—Ç—Ä–∞–Ω –†-150-–°)</span>
                                    <span class="achievement-badge"><span class="icon">üíª</span> –¶–∏—Ñ—Ä–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä (10+ LoTW)</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-muted mb-2">–ù–∞–≥—Ä–∞–¥—ã QO-100</h6>
                                <div class="d-flex flex-wrap gap-2">
                                    <span class="achievement-badge"><span class="icon">üó∫Ô∏è</span> W-QO100-R (25+ —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–§, LoTW)</span>
                                    <span class="achievement-badge"><span class="icon">üéì</span> W-QO100-PROFI (30+ —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–§, LoTW)</span>
                                    <span class="achievement-badge"><span class="icon">üåê</span> W-QO100-C (100+ —Å—Ç—Ä–∞–Ω, LoTW)</span>
                                    <span class="achievement-badge"><span class="icon">üìç</span> W-QO100-L (500+ QTH –ª–æ–∫–∞—Ç–æ—Ä–æ–≤, LoTW)</span>
                                    <span class="achievement-badge"><span class="icon">üì°</span> W-QO100-U (1000+ –ø–æ–∑—ã–≤–Ω—ã—Ö, LoTW)</span>
                                    <span class="achievement-badge"><span class="icon">üõ∞Ô∏è</span> W-QO100-B (1000+ —Å–≤—è–∑–µ–π)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>