{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block title %}TLog - {% trans "–ù–∞–≥—Ä–∞–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}{% endblock %}


{% block content %}
<div class="container mt-4">
    <div class="card">
        <!-- Page Header -->
        <div class="card-header bg-primary text-white text-center">
            <h2 class="mb-0"><span>üèÜ</span> {% trans "–ù–∞–≥—Ä–∞–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}</h2>
        </div>
        <div class="card-body">
            <p class="text-center text-muted">{% trans "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –Ω–∞–≥—Ä–∞–¥—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã" %}</p>

            <!-- Platform Statistics -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h3 class="display-4">{{ total_users }}</h3>
                            <p class="mb-0">{% trans "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" %}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h3 class="display-4">{{ total_qso_all }}</h3>
                            <p class="mb-0">{% trans "–í—Å–µ–≥–æ QSO" %}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h3 class="display-4">{{ total_qso_lotw }}</h3>
                            <p class="mb-0">{% trans "LoTW –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π" %}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Achievements Table -->
            {% if user_achievements_list %}
            <div class="table-responsive">
                <table class="table table-hover table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th style="width: 50px;">#</th>
                            <th>{% trans "–ü–æ–∑—ã–≤–Ω–æ–π" %}</th>
                            <th style="text-align: center;">{% trans "QSO" %}</th>
                            <th style="text-align: center;">{% trans "–†-150-–°" %}</th>
                            <th style="text-align: center;">{% trans "–†–µ–≥–∏–æ–Ω—ã" %}</th>
                            <th style="text-align: center;">LoTW</th>
                            <th style="min-width: 200px;">{% trans "–ù–∞–≥—Ä–∞–¥—ã" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in user_achievements_list %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>
                                <strong>{{ user.callsign }}</strong>
                            </td>
                            <td style="text-align: center;">
                                <span class="badge bg-primary">{{ user.total_qso }}</span>
                            </td>
                            <td style="text-align: center;">
                                <span class="badge {% if user.r150s_count >= 50 %}bg-success{% else %}bg-secondary{% endif %}">
                                    {{ user.r150s_count }}
                                </span>
                            </td>
                            <td style="text-align: center;">
                                <span class="badge bg-info">{{ user.states }}</span>
                            </td>
                            <td style="text-align: center;">
                                <span class="badge {% if user.lotw_count >= 10 %}bg-success{% else %}bg-secondary{% endif %}">
                                    {{ user.lotw_count }}
                                </span>
                            </td>
                            <td>
                                {% for achievement in user.achievements %}
                                <span class="badge bg-light border text-dark" title="{{ achievement.title }}">
                                    {{ achievement.icon }}
                                </span>
                                {% endfor %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-5 text-muted">
                <div style="font-size: 4rem;">üèÜ</div>
                <h4>{% trans "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö" %}</h4>
                <p>{% trans "–ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å QSO" %}</p>
            </div>
            {% endif %}

            <!-- Achievements Legend -->
            <div class="card mt-4">
                <div class="card-header">
                    <h6 class="mb-0 fw-bold text-dark"><span>üìñ</span> {% trans "–õ–µ–≥–µ–Ω–¥–∞ –Ω–∞–≥—Ä–∞–¥" %}</h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-muted mb-3">{% trans "–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã" %}</h6>
                            <div class="d-flex flex-wrap gap-2">
                                <span class="badge bg-light border text-dark"><span>üéØ</span> –ù–æ–≤–∏—á–æ–∫ (100+ QSO)</span>
                                <span class="badge bg-light border text-dark"><span>‚≠ê</span> –û–ø—ã—Ç–Ω—ã–π (500+ QSO)</span>
                                <span class="badge bg-light border text-dark"><span>üèÜ</span> –ú–∞—Å—Ç–µ—Ä (1000+ QSO)</span>
                                <span class="badge bg-light border text-dark"><span>üì°</span> –†–∞–∑–≤–µ–¥—á–∏–∫ (10+ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤)</span>
                                <span class="badge bg-light border text-dark"><span>üéõÔ∏è</span> –£–Ω–∏–≤–µ—Ä—Å–∞–ª (5+ –º–æ–¥—É–ª—è—Ü–∏–π)</span>
                                <span class="badge bg-light border text-dark"><span>üåç</span> –û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ DX (50+ —Å—Ç—Ä–∞–Ω)</span>
                                <span class="badge bg-light border text-dark"><span>üéñÔ∏è</span> –ü–∞—Ç—Ä–∏–æ—Ç (100+ —Å—Ç—Ä–∞–Ω)</span>
                                <span class="badge bg-light border text-dark"><span>üíª</span> –¶–∏—Ñ—Ä–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä (10+ LoTW)</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-muted mb-3">{% trans "–ù–∞–≥—Ä–∞–¥—ã QO-100" %}</h6>
                            <div class="d-flex flex-wrap gap-2">
                                <span class="badge bg-light border text-dark"><span>üó∫Ô∏è</span> W-QO100-R (25+ —Ä–µ–≥–∏–æ–Ω–æ–≤, LoTW)</span>
                                <span class="badge bg-light border text-dark"><span>üéì</span> W-QO100-PROFI (30+ —Ä–µ–≥–∏–æ–Ω–æ–≤, LoTW)</span>
                                <span class="badge bg-light border text-dark"><span>üåê</span> W-QO100-C (100+ —Å—Ç—Ä–∞–Ω, LoTW)</span>
                                <span class="badge bg-light border text-dark"><span>üìç</span> W-QO100-L (500+ –ª–æ–∫–∞—Ç–æ—Ä–æ–≤, LoTW)</span>
                                <span class="badge bg-light border text-dark"><span>üì°</span> W-QO100-U (1000+ –ø–æ–∑—ã–≤–Ω—ã—Ö, LoTW)</span>
                                <span class="badge bg-light border text-dark"><span>üõ∞Ô∏è</span> W-QO100-B (1000+ —Å–≤—è–∑–µ–π)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –Ω–∞–≥—Ä–∞–¥
document.addEventListener('DOMContentLoaded', function() {
    const achievementBadges = document.querySelectorAll('.badge[title]');
    
    achievementBadges.forEach(badge => {
        badge.addEventListener('click', function() {
            const title = this.getAttribute('title');
            if (title) {
                alert(title);
            }
        });
    });
});
</script>
{% endblock %}