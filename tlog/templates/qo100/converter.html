{% extends "qo100/base.html" %}
{% load static %}

{% block title %}–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –ª–æ–≥–∞ QO-100 - TLog{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <span>üõ∞Ô∏è</span> –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –ª–æ–≥–∞ QO-100
                </h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info mb-4">
                    <h6 class="alert-heading">üìã –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞</h6>
                    <p class="mb-0">
                        –ï—Å–ª–∏ –≤–∞—à –ª–æ–≥ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Å—Ç–∏ —É—á—ë—Ç —Å–≤—è–∑–µ–π –¥–ª—è QO-100, —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
                        –≤–∞—à ADIF —Ñ–∞–π–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ç–µ–≥–∞–º–∏ –¥–ª—è QO-100.
                    </p>
                    <hr>
                    <p class="mb-0">
                        –ü–æ–ª—É—á–µ–Ω–Ω—ã–π —Ñ–∞–π–ª ADIF –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤ <strong>LoTW</strong>, <strong>eQSL</strong>,
                        <strong>QRZ.com</strong>, <strong>Hamlog</strong> –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã.
                    </p>
                </div>

                <div class="alert alert-warning mb-4">
                    <h6 class="alert-heading">‚ö†Ô∏è –í–∞–∂–Ω–æ</h6>
                    <p class="mb-0">
                        –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ª–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ QO-100.
                        –ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–≥–∞ <code>BAND</code> –±—É–¥—É—Ç –∏–∑–º–µ–Ω–µ–Ω—ã –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω <code>13CM</code>
                        –∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–≥–∏ <code>SAT</code> –∏ <code>QO-100</code>.
                    </p>
                </div>

                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}

                <form method="post" enctype="multipart/form-data" action="{% url 'qo100_converter' %}">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label for="adif_file" class="form-label fw-bold">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç–µ ADIF —Ñ–∞–π–ª –∫–æ—Ç–æ—Ä—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</label>
                        <input type="file" class="form-control" id="adif_file" name="adif_file"
                               accept=".adi,.adif,.txt" required>
                        <div class="form-text">
                            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .adi, .adif, .txt
                        </div>
                    </div>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <span>üîÑ</span> –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <a href="/dashboard/" class="btn btn-outline-secondary">
                            <span>‚Ü©Ô∏è</span> –ù–∞–∑–∞–¥
                        </a>
                    </div>
                </form>

                {% if preview %}
                <div class="mt-4">
                    <h6>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</h6>
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>–ü—Ä–µ–≤—å—é —Ñ–∞–π–ª–∞</span>
                            <a href="/dashboard/qo100/converter/download/?filename={{ download_filename }}" class="btn btn-success btn-sm">
                                <span>üíæ</span> –°–∫–∞—á–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
                            </a>
                        </div>
                        <div class="card-body">
                            <pre class="bg-light p-3 rounded" style="max-height: 300px; overflow-y: auto; font-size: 0.85rem;">{{ preview }}</pre>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}