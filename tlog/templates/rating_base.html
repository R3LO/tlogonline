{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block title %}TLog - –†–µ–π—Ç–∏–Ω–≥{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/rating.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid py-4 rating-page">
    <div class="row">
        <div class="col-12">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
            <div class="rating-header text-center mb-4">
                <h2><span>üèÜ</span> –†–µ–π—Ç–∏–Ω–≥</h2>
                <p class="mb-0">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</p>
            </div>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
            <div class="rating-nav mb-4">
                <div class="d-flex flex-wrap gap-2 justify-content-center">
                    <button type="button" class="btn btn-outline-primary rating-nav-btn active" data-tab="regions">
                        <span>üó∫Ô∏è</span> –†–µ–≥–∏–æ–Ω—ã –†–æ—Å—Å–∏–∏
                    </button>
                    <button type="button" class="btn btn-outline-primary rating-nav-btn" data-tab="r150s">
                        <span>üéØ</span> –°—Ç—Ä–∞–Ω—ã –†-150-–°
                    </button>
                    <button type="button" class="btn btn-outline-primary rating-nav-btn" data-tab="dxcc">
                        <span>üåç</span> –°—Ç—Ä–∞–Ω—ã DXCC
                    </button>
                    <button type="button" class="btn btn-outline-primary rating-nav-btn" data-tab="qth">
                        <span>üìç</span> QTH –ª–æ–∫–∞—Ç–æ—Ä—ã
                    </button>
                    <button type="button" class="btn btn-outline-primary rating-nav-btn" data-tab="callsigns">
                        <span>üì°</span> –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–∑—ã–≤–Ω—ã–µ
                    </button>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            <div class="rating-content">
                <!-- –†–µ–≥–∏–æ–Ω—ã –†–æ—Å—Å–∏–∏ -->
                <div class="rating-tab active" id="regions-tab">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="mb-0"><span>üó∫Ô∏è</span> –†–µ–≥–∏–æ–Ω—ã –†–æ—Å—Å–∏–∏</h6>
                        </div>
                        <div class="card-body p-0">
                            {% if regions_stats %}
                            <div class="table-responsive">
                                <table class="table table-striped mb-0 rating-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>#</th>
                                            <th>–†–µ–≥–∏–æ–Ω</th>
                                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ QSO</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for item in regions_stats %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>
                                                <span class="badge bg-warning text-dark">{{ item.state }}</span>
                                            </td>
                                            <td>{{ item.count }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 text-muted">
                                <span style="font-size: 3rem;">üó∫Ô∏è</span>
                                <p class="mb-0">–î–∞–Ω–Ω—ã–µ –æ —Ä–µ–≥–∏–æ–Ω–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω—ã –†-150-–° -->
                <div class="rating-tab" id="r150s-tab">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="mb-0"><span>üéØ</span> –°—Ç—Ä–∞–Ω—ã –†-150-–°</h6>
                        </div>
                        <div class="card-body p-0">
                            {% if r150s_stats %}
                            <div class="table-responsive">
                                <table class="table table-striped mb-0 rating-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>#</th>
                                            <th>–°—Ç—Ä–∞–Ω–∞</th>
                                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ QSO</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for item in r150s_stats %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{ item.r150s }}</td>
                                            <td>{{ item.count }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 text-muted">
                                <span style="font-size: 3rem;">üéØ</span>
                                <p class="mb-0">–î–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–∞–Ω–∞—Ö –†-150-–° –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω—ã DXCC -->
                <div class="rating-tab" id="dxcc-tab">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="mb-0"><span>üåç</span> –°—Ç—Ä–∞–Ω—ã DXCC</h6>
                        </div>
                        <div class="card-body p-0">
                            {% if dxcc_stats %}
                            <div class="table-responsive">
                                <table class="table table-striped mb-0 rating-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>#</th>
                                            <th>–°—Ç—Ä–∞–Ω–∞</th>
                                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ QSO</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for item in dxcc_stats %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{ item.dxcc }}</td>
                                            <td>{{ item.count }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 text-muted">
                                <span style="font-size: 3rem;">üåç</span>
                                <p class="mb-0">–î–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–∞–Ω–∞—Ö DXCC –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- QTH –ª–æ–∫–∞—Ç–æ—Ä—ã -->
                <div class="rating-tab" id="qth-tab">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="mb-0"><span>üìç</span> QTH –ª–æ–∫–∞—Ç–æ—Ä—ã</h6>
                        </div>
                        <div class="card-body p-0">
                            {% if qth_stats %}
                            <div class="table-responsive">
                                <table class="table table-striped mb-0 rating-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>#</th>
                                            <th>–õ–æ–∫–∞—Ç–æ—Ä</th>
                                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ QSO</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for item in qth_stats %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>
                                                <span class="badge bg-info text-dark">{{ item.gridsquare }}</span>
                                            </td>
                                            <td>{{ item.count }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 text-muted">
                                <span style="font-size: 3rem;">üìç</span>
                                <p class="mb-0">–î–∞–Ω–Ω—ã–µ –æ QTH –ª–æ–∫–∞—Ç–æ—Ä–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–∑—ã–≤–Ω—ã–µ -->
                <div class="rating-tab" id="callsigns-tab">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="mb-0"><span>üì°</span> –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–∑—ã–≤–Ω—ã–µ</h6>
                        </div>
                        <div class="card-body p-0">
                            {% if callsigns_stats %}
                            <div class="table-responsive">
                                <table class="table table-striped mb-0 rating-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>#</th>
                                            <th>–ü–æ–∑—ã–≤–Ω–æ–π</th>
                                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ QSO</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for item in callsigns_stats %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>
                                                <span class="callsign-badge">{{ item.callsign }}</span>
                                            </td>
                                            <td>{{ item.count }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <div class="text-center py-5 text-muted">
                                <span style="font-size: 3rem;">üì°</span>
                                <p class="mb-0">–î–∞–Ω–Ω—ã–µ –æ –ø–æ–∑—ã–≤–Ω—ã—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/rating.js' %}"></script>
{% endblock %}
