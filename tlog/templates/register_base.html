{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block title %}TLog - {% trans "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" %}{% endblock %}

{% block content %}
<!-- Header -->
<div class="logbook-header text-center">
    <h2><span>üìù</span> {% trans "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" %}</h2>
    <p class="mb-0">{% trans "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª–µ–π" %}</p>
</div>

<div class="container mt-4">
    <div class="row">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="col-lg-8 mx-auto">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è Django -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags|default:"info" }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="card shadow">
                <div class="card-body p-4">
                    <form id="registerForm" method="POST" action="{% url 'register_page' %}">
                        {% csrf_token %}

                        <!-- –£—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="section-title mb-3">
                                    <span class="me-2">üîê</span>{% trans "–£—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å" %}
                                </h5>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="callsign" class="form-label">
                                    <span class="me-2">üìª</span>{% trans "–í–∞—à –ø–æ–∑—ã–≤–Ω–æ–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ª–æ–≥–∏–Ω)" %} *
                                </label>
                                <input type="text" 
                                       class="form-control form-control-lg" 
                                       id="callsign" 
                                       name="callsign"
                                       maxlength="10" 
                                       required
                                       placeholder="{% trans '–í–≤–µ–¥–∏—Ç–µ –ø–æ–∑—ã–≤–Ω–æ–π' %}"
                                       style="text-transform: uppercase;">
                                <div class="form-text">
                                    {% trans "–í–∞—à –ø–æ–∑—ã–≤–Ω–æ–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É" %}
                                </div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">
                                    <span class="me-2">üìß</span>Email *
                                </label>
                                <input type="email" 
                                       class="form-control form-control-lg" 
                                       id="email" 
                                       name="email" 
                                       required
                                       placeholder="email@example.com" 
                                       autocomplete="off">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="password" class="form-label">
                                    <span class="me-2">üîí</span>{% trans "–ü–∞—Ä–æ–ª—å" %} *
                                </label>
                                <input type="password" 
                                       class="form-control form-control-lg" 
                                       id="password" 
                                       name="password" 
                                       required
                                       placeholder="{% trans '–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤' %}">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="password_confirm" class="form-label">
                                    <span class="me-2">üîí</span>{% trans "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" %} *
                                </label>
                                <input type="password" 
                                       class="form-control form-control-lg" 
                                       id="password_confirm" 
                                       name="password_confirm" 
                                       required
                                       placeholder="{% trans '–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å' %}">
                            </div>
                        </div>

                        <!-- –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="row mb-4 mt-4">
                            <div class="col-12">
                                <h5 class="section-title mb-3">
                                    <span class="me-2">üë§</span>{% trans "–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" %}
                                </h5>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="first_name" class="form-label">
                                    <span class="me-2">üë§</span>{% trans "–ò–º—è" %}
                                </label>
                                <input type="text" 
                                       class="form-control form-control-lg" 
                                       id="first_name" 
                                       name="first_name"
                                       placeholder="{% trans '–ò–≤–∞–Ω' %}">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="last_name" class="form-label">
                                    <span class="me-2">üë§</span>{% trans "–§–∞–º–∏–ª–∏—è" %}
                                </label>
                                <input type="text" 
                                       class="form-control form-control-lg" 
                                       id="last_name" 
                                       name="last_name"
                                       placeholder="{% trans '–ü–µ—Ç—Ä–æ–≤' %}">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="qth" class="form-label">
                                    <span class="me-2">üìç</span>QTH ({% trans "–Ω–∞—Å–µ–ª—ë–Ω–Ω—ã–π –ø—É–Ω–∫—Ç" %})
                                </label>
                                <input type="text" 
                                       class="form-control form-control-lg" 
                                       id="qth" 
                                       name="qth"
                                       placeholder="{% trans '–≥. –ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è' %}">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="qth_locator" class="form-label">
                                    <span class="me-2">üó∫Ô∏è</span>QTH {% trans "–ª–æ–∫–∞—Ç–æ—Ä" %}
                                </label>
                                <input type="text" 
                                       class="form-control form-control-lg" 
                                       id="qth_locator" 
                                       name="qth_locator"
                                       maxlength="6" 
                                       placeholder="KO85UU">
                                <div class="form-text">
                                    {% trans "–ù–∞–ø—Ä–∏–º–µ—Ä: KO85UU –¥–ª—è –ú–æ—Å–∫–≤—ã" %}
                                </div>
                            </div>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ -->
                        <div class="row mt-4">
                            <div class="col-12">
                                <div class="d-flex flex-wrap gap-3 justify-content-center">
                                    <button type="submit" class="btn btn-primary btn-lg px-4">
                                        <span class="me-2">‚úÖ</span>{% trans "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" %}
                                    </button>
                                    <a href="/login/" class="btn btn-outline-secondary btn-lg px-4">
                                        <span class="me-2">üîô</span>{% trans "–ù–∞–∑–∞–¥" %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card bg-light">
                        <div class="card-body">
                            <h6 class="card-title">
                                <span class="me-2">‚ÑπÔ∏è</span>{% trans "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏" %}
                            </h6>
                            <ul class="list-unstyled mb-0 small">
                                <li class="mb-2">
                                    <span class="me-2">üîí</span>
                                    {% trans "–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∞–π—Ç–æ–º" %}
                                </li>
                                <li class="mb-2">
                                    <span class="me-2">üìß</span>
                                    {% trans "Email –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç—É" %}
                                </li>
                                <li class="mb-0">
                                    <span class="me-2">üìª</span>
                                    {% trans "–ü–æ–∑—ã–≤–Ω–æ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞—à–∏–º —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–∑—ã–≤–Ω—ã–º —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª—è" %}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–∑—ã–≤–Ω–æ–≥–æ –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
document.getElementById('callsign').addEventListener('input', function(e) {
    e.target.value = e.target.value.toUpperCase();
});

// –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π
document.getElementById('password_confirm').addEventListener('input', function() {
    const password = document.getElementById('password');
    const confirmPassword = this;
    
    if (password.value !== confirmPassword.value) {
        confirmPassword.setCustomValidity('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
    } else {
        confirmPassword.setCustomValidity('');
    }
});

// –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–∫–∞—Ç–æ—Ä–∞
document.getElementById('qth_locator').addEventListener('input', function(e) {
    e.target.value = e.target.value.toUpperCase();
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
document.getElementById('password').addEventListener('input', function() {
    const password = this.value;
    const strengthIndicator = document.getElementById('password-strength');
    
    if (password.length < 8) {
        this.setCustomValidity('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤');
    } else {
        this.setCustomValidity('');
    }
});
</script>

<style>
.section-title {
    color: #495057;
    font-weight: 600;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e9ecef;
}

.form-control:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.btn-primary {
    background: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%);
    border: none;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #0b5ed7 0%, #5a20d9 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
}

.card {
    border-radius: 15px;
    backdrop-filter: blur(10px);
}

@media (max-width: 768px) {
    .form-control-lg {
        font-size: 1rem;
    }
    
    .btn-lg {
        padding: 0.75rem 1rem;
        font-size: 1rem;
    }
}
</style>
{% endblock %}