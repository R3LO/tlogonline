# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞ QSO

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
./start_test_servers.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ó–∞–ø—É—Å—Ç–∏—Ç Django —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8000
- –ó–∞–ø—É—Å—Ç–∏—Ç HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è HTML —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 8080
- –û—Ç–∫—Ä–æ–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ï—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –æ—Ç–∫—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
```
http://127.0.0.1:8080/test_qrz_form.html
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîó –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS** ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üåê –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS"
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–∏—Å–∫** ‚Äî –≤–≤–µ–¥–∏—Ç–µ –ø–æ–∑—ã–≤–Ω–æ–π –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏"

### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
./stop_test_servers.sh
```

–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `start_test_servers.sh`

---

## –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

### 1. –ó–∞–ø—É—Å–∫ Django —Å–µ—Ä–≤–µ—Ä–∞

```bash
source venv/bin/activate
python manage.py runserver 127.0.0.1:8000
```

### 2. –ó–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è HTML (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
python3 -m http.server 8080
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
http://127.0.0.1:8080/test_qrz_form.html
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
curl "http://127.0.0.1:8000/api/v1/public/qso-search/?callsign=TEST"
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
    "found": false,
    "callsign": "TEST",
    "message": "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS

```bash
curl -I -H "Origin: https://qrz.com" \
  "http://127.0.0.1:8000/api/v1/public/qso-search/?callsign=TEST"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Access-Control-Allow-Origin: https://qrz.com`

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "NetworkError when attempting to fetch resource"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å `file://` –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP —Å–µ—Ä–≤–µ—Ä –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞:
```bash
python3 -m http.server 8080
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ http://127.0.0.1:8080/test_qrz_form.html
```

### –û—à–∏–±–∫–∞ "Connection refused"

**–ü—Ä–∏—á–∏–Ω–∞:** Django —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
source venv/bin/activate
python manage.py runserver 127.0.0.1:8000
```

### –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Ä—Ç 8000 –∏–ª–∏ 8080 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f "python manage.py runserver"
pkill -f "python3 -m http.server 8080"

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã
python manage.py runserver 127.0.0.1:8001
python3 -m http.server 8081
```

### CORS –æ—à–∏–±–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–≥–æ–ª–æ–≤–∫–∏ CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `myproject/settings.py`:
```python
INSTALLED_APPS = [
    ...
    'corsheaders',
    ...
]

MIDDLEWARE = [
    ...
    'corsheaders.middleware.CorsMiddleware',
    ...
]

CORS_ALLOWED_ORIGINS = [
    'https://qrz.com',
    'https://www.qrz.com',
]
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### 1. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ QSO –≤ –±–∞–∑—É

```bash
source venv/bin/activate
python manage.py shell
```

```python
from tlog.models import QSO
from django.contrib.auth import get_user_model

User = get_user_model()

# –ü–æ–ª—É—á–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user = User.objects.first()

# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ QSO
QSO.objects.create(
    user=user,
    callsign='UA1AAA',
    my_callsign='UA0AAA',
    mode='SSB',
    frequency='7.000',
    start_time='2024-01-01 12:00:00'
)

QSO.objects.create(
    user=user,
    callsign='UA1AAA',
    my_callsign='UA0AAA',
    mode='CW',
    frequency='14.000',
    start_time='2024-01-01 12:30:00'
)

QSO.objects.create(
    user=user,
    callsign='UA1AAA',
    my_callsign='UA0AAA/P',
    mode='FT8',
    frequency='14.074',
    start_time='2024-01-01 13:00:00'
)

print("–¢–µ—Å—Ç–æ–≤—ã–µ QSO —Å–æ–∑–¥–∞–Ω—ã!")
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É

–ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–≤–µ–¥–∏—Ç–µ –ø–æ–∑—ã–≤–Ω–æ–π `UA1AAA` –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏".

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –°—Ç—Ä–æ–∫–∞: UA0AAA
- –ö–æ–ª–æ–Ω–∫–∏: SSB (1), CW (1), FT8 (0)
- –°—Ç—Ä–æ–∫–∞: UA0AAA/P
- –ö–æ–ª–æ–Ω–∫–∏: SSB (0), CW (0), FT8 (1)

---

## –î–µ–ø–ª–æ–π –Ω–∞ production

–ö–æ–≥–¥–∞ –≤—Å—ë –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:

1. **–ò–∑–º–µ–Ω–∏—Ç–µ URL** –≤ `QRZ_COM_SEARCH_FORM.md`:
   ```javascript
   const API_BASE_URL = 'https://tlogonline.com';
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥** –∏–∑ `QRZ_COM_SEARCH_FORM.md`

3. **–í—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ QRZ.com** –≤ –ø–æ–ª–µ "Bio" –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.
‚îú‚îÄ‚îÄ test_qrz_form.html          # –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ start_test_servers.sh       # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ stop_test_servers.sh        # –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ QRZ_COM_SEARCH_FORM.md      # –ö–æ–¥ —Ñ–æ—Ä–º—ã –¥–ª—è QRZ.com
‚îú‚îÄ‚îÄ TEST_INSTRUCTIONS.md        # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ tlog/
    ‚îî‚îÄ‚îÄ views/
        ‚îî‚îÄ‚îÄ rest_api.py         # PublicQSOSearchAPIView
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /tmp/django_server.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Django —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: `ps aux | grep "python manage.py runserver"`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ HTTP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: `ps aux | grep "python3 -m http.server"`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ `myproject/settings.py`
